---
output: github_document
---

# Sync `[pr]` with `[upstream/master]`

Just Git

## Maintainer

Create new repo
Clone locally
Add README
Commit and push to source repo

```
* 7ad3e62 (HEAD -> master, origin/master) M Add README.md
```



## Contrubutor

* Fork source repo
* Clone locally
* Checkout new branch
* Edit README
* Commit and push to fork repo

```
* 9fd9ae5 (HEAD -> pr, origin/pr) C Edit README.md
* 7ad3e62 (origin/master, origin/HEAD, master) M Add README.md
```

## Contrubutor

* Create pull request on GitHub

<img src="https://i.imgur.com/lmGJD6F.png" width=760>



## Maintainer

* Edit README
* Commit and push

```
* 7d8b91b (HEAD -> master, origin/master) M Edit README.md
* 7ad3e62 M Add README.md
```



## Notice

Notice conflict

<img src="https://i.imgur.com/BTxqGlC.png" width=760>



## Contrubutor

* Add connection to source repo, then view all connections

```
Contributor@Laptop  ~/abc (pr)
$ git remote add upstream git@github.com:an-org/abc.git

Contributor@Laptop  ~/abc (pr)
$ git remote -v
origin  git@github.com:maurolepore/abc.git (fetch)
origin  git@github.com:maurolepore/abc.git (push)
upstream        git@github.com:an-org/abc.git (fetch)
upstream        git@github.com:an-org/abc.git (push)
```

## Contrubutor

* Bring metadata from source repo

```
Contributor@Laptop  ~/abc (pr)
$ git fetch upstream
remote: Enumerating objects: 5, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done.
From github.com:an-org/abc
* [new branch]      master     -> upstream/master
```

## Contributor

* The history of the local repo remains the same

```
* 9fd9ae5 (HEAD -> pr, origin/pr) C Edit README.md
* 7ad3e62 (origin/master, origin/HEAD, master) M Add README.md
```

## Contrubutor

* Sync the local history (contributor) with updated history of source repo:

```
Contributor@Laptop  ~/abc (pr)
$ git merge upstream/master
Auto-merging README.md
CONFLICT (content): Merge conflict in README.md
Recorded preimage for 'README.md'
Automatic merge failed; fix conflicts and then commit the result.
```

## Contrubutor

* Fix merge conflicts, then push with `git push`

<img src="https://i.imgur.com/kNwo4of.png" width=760>

## Contrubutor

* The history of the local repo has now changed to reflect the merge

```
*   56b721c (HEAD -> pr, origin/pr) C Fix merge conflicts (combining edits by C/M)
|\
| * 7d8b91b (upstream/master) M Edit README.md
* | 9fd9ae5 C Edit README.md
|/
  * 7ad3e62 (origin/master, origin/HEAD, master) M Add README.md
```



## Notice

* Notice that the PR is now again ready to merge

<img src="https://i.imgur.com/kY4TC4W.png" width=760>

## Notice

* After merging, the source repo stays clean (no `[pr]` branch)

<div class="columns-2">

<img src="https://i.imgur.com/jVbBgOk.png" height=400>

<img src="https://i.imgur.com/NwQSOzU.png" height=400>

</div>



## Maintainer

```
Maintainer@Laptop  ~/abc (master)
$ git pull
remote: Enumerating objects: 5, done.
remote: Counting objects: 100% (5/5), done.
remote: Compressing objects: 100% (2/2), done.
Unpacking objects: 100% (3/3), done.
remote: Total 3 (delta 0), reused 2 (delta 0), pack-reused 0
From github.com:an-org/abc
   7d8b91b..bb2b83e  master     -> origin/master
Updating 7d8b91b..bb2b83e
Fast-forward
 README.md | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)
```

## Maintainer

* The commit history now has an additional commit

```
* bb2b83e (HEAD -> master, origin/master) C Edit README.md (#1)
* 7d8b91b M Edit README.md
* 7ad3e62 M Add README.md
```
