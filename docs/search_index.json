[
["testing.html", "Chapter 17 2020-02-18: Testing 17.1 Why testing? 17.2 Set up 17.3 Workflow 17.4 Tests structure 17.5 What to test? 17.6 What to test? 17.7 Questions", " Chapter 17 2020-02-18: Testing From https://r-pkgs.org/tests.html 17.1 Why testing? Discuss 17.2 Set up usethis::use_testthat() Among other things, usethis::use_testthat() attaches testthat in tests/testthat.R library(testthat) 17.3 Workflow Modify your code or tests. Test your package with Ctrl/Cmd + Shift + T or devtools::test(). Repeat until all tests pass. 17.4 Tests structure If R/max_minus_min.R contains: max_minus_min &lt;- function(x) { max(x) - min(x) } Then tests/testthat/test-max_minus_min.R may contains: test_that(&quot;max_minus_min with simple good input returns expected output&quot;, { expect_equal(max_minus_min(2:1), 1) expect_equal(max_minus_min(2:1), 1) }) 17.5 What to test? Whenever you are tempted to type something into a print statement or a debugger expression, write it as a test instead. – Martin Fowler Test what should work. test_that(&quot;max_minus_min with simple good input returns expected output&quot;, { expect_equal(max_minus_min(2:1), 1) expect_equal(max_minus_min(2:1), 1) }) 17.6 What to test? A QA engineer walks into a bar. Oders a beer. Orders 0 beers. Orders 9999999 beers. Orders a lizard. Orders -1 beers. Orders a afdelijknesv. – Bill Sempf ((???)) on Twitter Test what should fail. test_that(&quot;max_minus_min with bad input throws an error&quot;, { expect_error(max_minus_min(letters), &quot;non-numeric argument&quot;) }) Edge cases. test_that(&quot;max_minus_min with edge cases behaves as expected&quot;, { expect_equal(max_minus_min(NA_integer_), NA_integer_) # Oh no! I need to modify my code until this test passes expect_equal(max_minus_min(c(1, 2, NA)), 1) }) #&gt; Error: Test failed: &#39;max_minus_min with edge cases behaves as expected&#39; #&gt; * &lt;text&gt;:5: max_minus_min(c(1, 2, NA)) not equal to 1. #&gt; 1/1 mismatches #&gt; [1] NA - 1 == NA 17.7 Questions Do I need a package to test? How can I find all possible expectations? What are common expectations? How can I test that the data my code needs hasn’t change? How can I test messages, warnings, errors? How often should I test? "]
]
